(function(b,a){function c(d){var e=arguments.callee;return function(){clearInterval(g);if(!(d&&Object.prototype.toString.call(d.callBack)=="[object Function]")){throw new Error("必须传递参数及回调函数")}var m=$(this);if(d.isPhone){var o=d.getPhone(),i=d.phoneReg||/^1[3|4|5|7|8][0-9]\d{8}$/;if(!i.test(o)){d.phoneCallBack&&d.phoneCallBack.call(m,o);return}}var g=null,k=d.time||60,l=0,h=1000,f=new Date().getTime(),n=k*1000,j=d.unabledClass||"",p=d.timeIsUpText||"重新获取",q=d.timeRunnigText||" s后重新获取";m.off("click");m.addClass(j);g=setTimeout(function(){var r=0,s=h,t=arguments.callee;l++;r=new Date().getTime()-(f+l*h);r=(r<=0)?0:r;s=h-r;s=(s<=0)?0:s;if((n-=h)<=0){clearTimeout(g);m.html(p).removeClass(j);m.on("click",e(d))}else{k--;m.html(k+q);if(d.getCurrentTime&&(Object.prototype.toString.call(d.getCurrentTime)=="[object Function]")){d.getCurrentTime.call(m,k)}g=setTimeout(t,s)}},h);d.callBack.call(m)}}b.getVerifyCode=c})(window,document);